{{ $layout := .Get "layout" | default "grid" }}
{{ $limit := .Get "limit" | default 999 }}

<div class="products-grid">
  {{ range first $limit (where .Site.RegularPages "Section" "products").ByDate.Reverse }}
    <div class="product-card">
      <a href="{{ .RelPermalink }}">
        {{ if .Params.image }}
        <div class="product-image">
          <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
        </div>
        {{ end }}
        <div class="product-content">
          <h3 class="product-title">{{ .Title }}</h3>
          {{ if .Params.price }}
          <p class="product-price">{{ .Params.price }}</p>
          {{ end }}
          {{ if .Description }}
          <p class="product-summary">{{ .Description }}</p>
          {{ end }}
        </div>
      </a>
    </div>
  {{ end }}
</div>